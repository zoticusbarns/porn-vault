(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{378:function(t,e,s){"use strict";s.r(e);var a=s(45),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),s("h2",{attrs:{id:"dockerhub"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerhub"}},[t._v("#")]),t._v(" Dockerhub")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://hub.docker.com/repository/docker/boi12321/porn-vault",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/repository/docker/boi12321/porn-vault"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"docker-cli"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-cli"}},[t._v("#")]),t._v(" docker cli")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("docker run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("porn-vault "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),t._v(":3000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /etc/localtime:/etc/localtime:ro "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /porn_vault_config:/config "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /my_videos:/videos "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /my_images:/images "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PUID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GUID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --device"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/dev/dri/renderD128:/dev/dri/renderD128 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For VAAPI users")]),t._v("\n  --network"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("porn-vault-net "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# When you run Elasticsearch with Docker")]),t._v("\n  --restart unless-stopped "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  porn-vault\n")])])]),s("h2",{attrs:{id:"docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[t._v("#")]),t._v(" docker-compose")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("porn-vault")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" porn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("vault\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" porn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("vault\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" PUID=1000\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" PGID=1000\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/localtime:/etc/localtime:ro"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/porn_vault_config:/config"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/my_videos:/videos"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/my_images:/images"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3000:3000"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("devices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Only for vaapi users")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/dri/renderD128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/dev/dri/renderD128\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unless"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("stopped\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# When you run Elasticsearch with Docker")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" porn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("vault"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("net\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("elasticsearch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'docker.elastic.co/elasticsearch/elasticsearch:7.13.1'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" discovery.type=single"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'9200:9200'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'9300:9300'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" porn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("vault"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("net\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("porn-vault-net")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bridge\n")])])]),s("h2",{attrs:{id:"docker-parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-parameters"}},[t._v("#")]),t._v(" Docker parameters")]),t._v(" "),s("p",[t._v("The container requires some parameters for the app to run correctly. These parameters are separated by a colon and indicate "),s("code",[t._v("<external>:<internal>")]),t._v(" respectively. For example, "),s("code",[t._v("-p 8080:3000")]),t._v(" would expose port "),s("code",[t._v("3000")]),t._v(" from inside the container to be accessible from the host's IP on port "),s("code",[t._v("8080")]),t._v(" outside the container.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("Parameter")]),t._v(" "),s("th",[t._v("Function")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-p 3000")])]),t._v(" "),s("td",[t._v("The port for the porn-vault webinterface. This must match what is in your config file.")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-v /config")])]),t._v(" "),s("td",[t._v("Directory for persistent files (config file, database, backups...). Unless you changed the environment variable "),s("code",[t._v("PV_CONFIG_FOLDER")]),t._v(", it must be exactly this name.")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-v /videos")])]),t._v(" "),s("td",[t._v("A directory for the "),s("code",[t._v("import.videos")]),t._v(" config setting. The volume can have whatever path you want such as "),s("code",[t._v("/videos_from_drive_1")]),t._v(" or "),s("code",[t._v("/videos_from_drive_2")]),t._v(" "),s("em",[t._v("as long as you use that path in your config")]),t._v(".")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-v /images")])]),t._v(" "),s("td",[t._v("A directory for the "),s("code",[t._v("import.images")]),t._v(" config The volume can have whatever path you want such as "),s("code",[t._v("/images_from_drive_1")]),t._v(" or "),s("code",[t._v("/images_from_drive_2")]),t._v(" "),s("em",[t._v("as long as you use that path in your config")]),t._v(".")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-e PUID")])]),t._v(" "),s("td",[t._v("The uid to apply to the container's user")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-e GUID")])]),t._v(" "),s("td",[t._v("The guid to apply to the container's user")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("--device /dev/dri")])]),t._v(" "),s("td",[t._v("VAAPI devices to mount to /dev/dri inside the container")])])])]),t._v(" "),s("p",[t._v("The 'videos' and 'images' volume paths do not have to be strictly named as such and are not strictly necessary. If you have a folder structure like this:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("my-stuff/\n├── images\n└── videos\n")])])]),s("p",[t._v("You could have a single volume such as "),s("code",[t._v("-v /my-stuff:/root_stuff")]),t._v(" and then use it like this in your config file:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config.json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"import"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"videos"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root_stuff/videos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"images"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root_stuff/images"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"integration-with-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#integration-with-elasticsearch"}},[t._v("#")]),t._v(" Integration with Elasticsearch")]),t._v(" "),s("p",[t._v("You may run Elasticsearch and Porn-Vault either separately, or in a single docker-compose.yml."),s("br"),t._v("\nTo setup elasticsearch with Docker, please refer to "),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.10/docker.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.elastic.co/guide/en/elasticsearch/reference/7.10/docker.html"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("When running both with Docker, you must make sure the Porn-Vault container can access the Elasticsearch container.")]),t._v(" "),s("blockquote",[s("p",[t._v("User-defined bridges provide automatic DNS resolution between containers.\nContainers on the default bridge network can only access each other by IP addresses, unless you use the --link option, which is considered legacy. On a user-defined bridge network, containers can resolve each other by name or alias.")])]),t._v(" "),s("p",[t._v("Create a new docker network using the "),s("code",[t._v("bridge")]),t._v(" driver.")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cli")]),t._v("\ndocker network create -d bridge porn-vault-net\ndocker run --network"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("porn-vault-net --name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("porn-vault\n")])])]),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker-compose.yml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("porn-vault")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" porn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("vault"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("net\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("porn-vault-net")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bridge\n")])])]),s("p",[t._v("Then in your config, you may set "),s("code",[t._v("search.host")]),t._v(" to "),s("code",[t._v("http://<name_of_es_container>:9200")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config.json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"search"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://elasticsearch:9200"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"user-group-identifiers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-group-identifiers"}},[t._v("#")]),t._v(" User / Group identifiers")]),t._v(" "),s("p",[t._v("When using volumes ("),s("code",[t._v("-v")]),t._v(" flags) permissions issues can arise between the host OS and the container, we avoid this issue by allowing you to specify the user "),s("code",[t._v("PUID")]),t._v(" and group "),s("code",[t._v("PGID")]),t._v(".")]),t._v(" "),s("p",[t._v("Ensure any volume directories on the host are owned by the same user you specify and any permissions issues will vanish like magic.")]),t._v(" "),s("p",[t._v("In this instance "),s("code",[t._v("PUID=1000")]),t._v(" and "),s("code",[t._v("PGID=1000")]),t._v(", to find yours use "),s("code",[t._v("id user")]),t._v(" as below:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" username\n  "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("uid")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dockeruser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gid")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dockergroup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("groups")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dockergroup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"hardware-acceleration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hardware-acceleration"}},[t._v("#")]),t._v(" Hardware acceleration")]),t._v(" "),s("h3",{attrs:{id:"vaapi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vaapi"}},[t._v("#")]),t._v(" VAAPI")]),t._v(" "),s("p",[t._v("To use VAAPI hardware acceleration, you must mount your "),s("code",[t._v("/dev/dri")]),t._v(" device inside the container:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("--device=/dev/dri/renderD128:/dev/dri/renderD128\n")])])]),s("h2",{attrs:{id:"notes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[t._v("#")]),t._v(" Notes")]),t._v(" "),s("ul",[s("li",[t._v("When using Docker, the "),s("code",[t._v("binaries.ffmpeg")]),t._v(" & "),s("code",[t._v("binaries.ffprobe")]),t._v(" paths in the config must be valid, otherwise the program will exit. The images should already have ffmpeg installed and thus use the following default paths:")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config.json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"binaries"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ffmpeg"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/bin/ffmpeg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ffprobe"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/bin/ffprobe"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("By default, the images set the environment variable "),s("code",[t._v("PV_CONFIG_FOLDER=/config")]),t._v(", and create a volume for "),s("code",[t._v("/config")]),t._v(". Otherwise, you may run into permission or persistence issues.")])]),t._v(" "),s("h2",{attrs:{id:"build-from-source-advanced"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-from-source-advanced"}},[t._v("#")]),t._v(" Build from source (advanced)")]),t._v(" "),s("p",[t._v("You can build a docker image yourself with the "),s("code",[t._v("Dockerfile")]),t._v(" in the "),s("code",[t._v("docker")]),t._v(' folder. To do this, you must "clone" this git repository or download a zip of the sources (not the release zips) from Github. Then you can follow one of the docker-cli or docker-compose guides above.')]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("WARNING")]),t._v(": the docker context (i.e. where you are running the command from) has to be the root of the repository. You just need to specify the path to the appropriate Dockerfile.")])]),t._v(" "),s("p",[t._v("There is a "),s("code",[t._v("Dockerfile")]),t._v(" in the "),s("code",[t._v("docker")]),t._v(" folder of the repo that allow you to either build an image locally.")]),t._v(" "),s("p",[t._v("Build the image with "),s("code",[t._v("docker build -t porn-vault -f docker/Dockerfile.debian .")])])])}),[],!1,null,null,null);e.default=n.exports}}]);